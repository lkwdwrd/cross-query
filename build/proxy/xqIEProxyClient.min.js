/*! Cross Query - v0.2.0
 * 
 * Copyright (c) 2014; * Licensed GPLv2+ */
!function(a){"use strict";function b(a,b){return b=b||{},"string"!=typeof a||!0!==b.window?m(a,b):l[a]?l[a].publicObj:(l[a]={url:a},l[a].messageKey=j()+j(),l[a].openWindow=h(a,l[a].messageKey,b.attrs),l[a].xqObject=m(a),l[a].openWindow(),f.call(l[a]),l[a].publicObj={query:i(l[a],c),get:i(l[a],d),refresh:i(l[a],e),pause:l[a].xqObject.pause,start:l[a].xqObject.play},l[a].publicObj)}function c(a,b){return this.win.closed&&this.openWindow(),this.active||f.call(this),this.xqObject.query({action:"proxyCall",data:a},b)}function d(){return this.win}function e(){this.win.location=this.url,this.xqObject.refresh()}function f(){this.xqObject.query({action:"xqProxyActivate",data:this.messageKey},{cache:!1,timeoout:-1}).always(i(this,g)),this.active=!0}function g(){this.active=!1}function h(b,c,d){return function(){this.win=a.open(b,c,d)}}function i(a,b){return"object"==typeof a&&"function"==typeof b?function(){return b.apply(a,arguments)}:void 0}function j(){return k++,Math.random().toString(36).substring(7)+k}var k=-1,l={},m=a.xq;a.xq=b}(window,document,void 0);