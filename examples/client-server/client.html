<!Doctype html>
<html>
	<head>
		<title>Send data from client to server</title>
	</head>
	<body>
		<h1>Cross Query - Client to server example</h1>
			<iframe id="send-frame" src="server.html"></iframe>
			<input type="text" id="send-data" /><input type="submit" id="send-submit">
		<script type="text/javascript" src="../../build/xqClient.min.js"></script>
		<script id="example-script" type="text/javascript">
			(function(){
				//Vars and some cached element references.
				var serverFrame,
					frame = document.getElementById( 'send-frame' ),
					text = document.getElementById( 'send-data' ),
					button = document.getElementById( 'send-submit' );
				/**
				 * Quick and dirty cross browser event attaching.
				 * 
				 * @param {DOM Node}   el  The node to attach the event to.
				 * @param {string}     evt The event name.
				 * @param {Function}   fn  The event handler.
				 */
				function addEvent( el, evt, fn ) {
					if ( window.addEventListener ) {
						el.addEventListener( evt, fn, false );
					} elseif( window.attachEvent ) {
						el.attachEvent( 'on' + evt, fn );
					}
				}
				/**
				 * Send data to the frame using Cross Query.
				 * 
				 * @return {void}
				 */
				function sendData(){
					serverFrame.query( {action: 'print', data: text.val } );
				}
				// OK, we have all the pieces, fire up Cross Query and attach the event to the button.
				serverFrame = xq( frame );
				addEvent( button, 'click', sendData );
			})();
		</script>
	</body>
</html>